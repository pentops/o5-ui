/**
 * @generated by @pentops/jsonapi-jdef-ts-generator (Plugin: NormalizedQueryPlugin) - do not edit */

import { usePreloadDataFromNormalizedCache } from '@pentops/normalized-query-cache';
import { useQuery, type UseQueryOptions } from '@tanstack/react-query';
import { schema } from 'normalizr';
import { o5AwsDeployerV1DeploymentStateEntity } from '../../../entities/generated/o5-aws-deployer-v1-deployment-state';
import {
  O5AwsDeployerV1DeploymentQueryServiceGetDeploymentResponse,
  O5AwsDeployerV1DeploymentQueryServiceGetDeploymentGetDeploymentRequest,
} from '../../../types/generated';
import { o5AwsDeployerV1DeploymentQueryServiceGetDeployment } from '../../generated';

export const o5AwsDeployerV1DeploymentQueryServiceGetDeploymentResponseEntity =
  new schema.Object<O5AwsDeployerV1DeploymentQueryServiceGetDeploymentResponse>({
    state: o5AwsDeployerV1DeploymentStateEntity,
  });
/**
 * @generated by NormalizedQueryPlugin (get /deployer/v1/q/deployment/:deploymentId) */

export function buildO5AwsDeployerV1DeploymentQueryServiceGetDeploymentKey(
  request?: O5AwsDeployerV1DeploymentQueryServiceGetDeploymentGetDeploymentRequest,
) {
  const entityId = o5AwsDeployerV1DeploymentStateEntity.getId(request || {}, {}, '');
  if (entityId) return [o5AwsDeployerV1DeploymentStateEntity.key, 'detail', entityId] as const;
  return [o5AwsDeployerV1DeploymentStateEntity.key] as const;
}

export function useO5AwsDeployerV1DeploymentQueryServiceGetDeployment(
  request: O5AwsDeployerV1DeploymentQueryServiceGetDeploymentGetDeploymentRequest | undefined,
  options?: Partial<UseQueryOptions<O5AwsDeployerV1DeploymentQueryServiceGetDeploymentResponse | undefined>>,
) {
  const preloadData = usePreloadDataFromNormalizedCache<O5AwsDeployerV1DeploymentQueryServiceGetDeploymentResponse, 'state'>(
    o5AwsDeployerV1DeploymentQueryServiceGetDeploymentResponseEntity,
    { state: request?.deploymentId },
  );

  return useQuery({
    queryKey: buildO5AwsDeployerV1DeploymentQueryServiceGetDeploymentKey(request),
    queryFn: async () => o5AwsDeployerV1DeploymentQueryServiceGetDeployment('', request),
    enabled: Boolean(request?.deploymentId),
    meta: { normalizationSchema: o5AwsDeployerV1DeploymentQueryServiceGetDeploymentResponseEntity },
    placeholderData: preloadData,
    ...options,
  });
}
